CREATE OR ALTER TABLE SF_METRICS.QUERY_HISTORY (
  LOGDATE DATE
  , QUERY_ID VARCHAR
  , QUERY_TEXT VARCHAR
  , DATABASE_ID INTEGER
  , DATABASE_NAME VARCHAR
  , SCHEMA_ID INTEGER
  , SCHEMA_NAME VARCHAR
  , QUERY_TYPE VARCHAR
  , SESSION_ID INTEGER
  , USER_NAME VARCHAR
  , ROLE_NAME VARCHAR
  , WAREHOUSE_ID INTEGER
  , WAREHOUSE_NAME VARCHAR
  , WAREHOUSE_SIZE VARCHAR
  , WAREHOUSE_TYPE VARCHAR
  , CLUSTER_NUMBER INTEGER
  , QUERY_TAG VARCHAR
  , EXECUTION_STATUS VARCHAR
  , ERROR_CODE VARCHAR
  , ERROR_MESSAGE VARCHAR
  , START_TIME TIMESTAMP_LTZ
  , END_TIME TIMESTAMP_LTZ
  , TOTAL_ELAPSED_TIME INTEGER
  , BYTES_SCANNED INTEGER
  , PERCENTAGE_SCANNED_FROM_CACHE FLOAT
  , BYTES_WRITTEN INTEGER
  , BYTES_WRITTEN_TO_RESULT INTEGER
  , BYTES_READ_FROM_RESULT INTEGER
  , ROWS_PRODUCED INTEGER
  , ROWS_INSERTED INTEGER
  , ROWS_UPDATED INTEGER
  , ROWS_DELETED INTEGER
  , ROWS_UNLOADED INTEGER
  , BYTES_DELETED INTEGER
  , PARTITIONS_SCANNED INTEGER
  , PARTITIONS_TOTAL INTEGER
  , BYTES_SPILLED_TO_LOCAL_STORAGE INTEGER
  , BYTES_SPILLED_TO_REMOTE_STORAGE INTEGER
  , BYTES_SENT_OVER_THE_NETWORK INTEGER
  , COMPILATION_TIME INTEGER
  , EXECUTION_TIME INTEGER
  , QUEUED_PROVISIONING_TIME INTEGER
  , QUEUED_REPAIR_TIME INTEGER
  , QUEUED_OVERLOAD_TIME INTEGER
  , TRANSACTION_BLOCKED_TIME INTEGER
  , OUTBOUND_DATA_TRANSFER_CLOUD VARCHAR
  , OUTBOUND_DATA_TRANSFER_REGION VARCHAR
  , OUTBOUND_DATA_TRANSFER_BYTES INTEGER
  , INBOUND_DATA_TRANSFER_CLOUD VARCHAR
  , INBOUND_DATA_TRANSFER_REGION VARCHAR
  , INBOUND_DATA_TRANSFER_BYTES INTEGER
  , LIST_EXTERNAL_FILES_TIME INTEGER
  , CREDITS_USED_CLOUD_SERVICES FLOAT
  , RELEASE_VERSION VARCHAR
  , EXTERNAL_FUNCTION_TOTAL_INVOCATIONS INTEGER
  , EXTERNAL_FUNCTION_TOTAL_SENT_ROWS INTEGER
  , EXTERNAL_FUNCTION_TOTAL_RECEIVED_ROWS INTEGER
  , EXTERNAL_FUNCTION_TOTAL_SENT_BYTES INTEGER
  , EXTERNAL_FUNCTION_TOTAL_RECEIVED_BYTES INTEGER
  , QUERY_LOAD_PERCENT INTEGER
  , IS_CLIENT_GENERATED_STATEMENT BOOLEAN
  , QUERY_ACCELERATION_BYTES_SCANNED INTEGER
  , QUERY_ACCELERATION_PARTITIONS_SCANNED INTEGER
  , QUERY_ACCELERATION_UPPER_LIMIT_SCALE_FACTOR INTEGER
  , TRANSACTION_ID INTEGER
  , CHILD_QUERIES_WAIT_TIME INTEGER
  , ROLE_TYPE VARCHAR
  , QUERY_HASH VARCHAR
  , QUERY_HASH_VERSION INTEGER
  , QUERY_PARAMETERIZED_HASH VARCHAR
  , QUERY_PARAMETERIZED_HASH_VERSION INTEGER
  , ROWS_WRITTEN_TO_RESULT INTEGER
  , QUERY_RETRY_TIME INTEGER
  , QUERY_RETRY_CAUSE VARCHAR
  , FAULT_HANDLING_TIME INTEGER
  , USER_TYPE VARCHAR
  , USER_DATABASE_NAME VARCHAR
  , USER_DATABASE_ID VARCHAR
  , USER_SCHEMA_NAME VARCHAR
  , USER_SCHEMA_ID VARCHAR
)
COMMENT = 'Archive of SNOWFLAKE.ACCOUNT_USAGE.QUERY_HISTORY'
;
